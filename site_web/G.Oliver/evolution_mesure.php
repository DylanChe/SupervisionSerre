<?php
include('inc/connect.php');
?>

<!DOCTYPE html>
<html lang="fr-FR" prefix="og: http://ogp.me/ns#">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Groupe Olivier - Supervision</title>
    <link rel="profile" href="http://gmpg.org/xfn/11">
    <link rel="pingback" href="http://www.groupe-olivier.fr/xmlrpc.php">
    <link href='http://fonts.googleapis.com/css?family=Neuton:400,700,300' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Nothing+You+Could+Do' rel='stylesheet' type='text/css'>
    <!-- favicon -->


    <!--[if IE]><![endif]-->

    <!--[if lt IE 9]>
    <script src="http://www.groupe-olivier.fr/wp-content/themes/unite/inc/js/html5shiv.min.js"></script>
    <script src="http://www.groupe-olivier.fr/wp-content/themes/unite/inc/js/respond.min.js"></script>
    <![endif]-->

    <!-- This site is optimized with the Yoast WordPress SEO plugin v1.7.4 - https://yoast.com/wordpress/plugins/seo/ -->
    <link rel="canonical" href="" />
    <meta property="og:locale" content="fr_FR" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Groupe Olivier - Groupe Olivier" />
    <meta property="og:description" content="Il s'agit du site Web comportant la supervision de l'ensemble des serres du Groupe Olivier. &nbsp;" />
    <meta property="og:url" content="" />
    <!-- / Yoast WordPress SEO plugin. -->

    <link rel="stylesheet" type="text/css" href="css/style.css">
    <link rel="alternate" type="application/rss+xml" title="Groupe Olivier &raquo; Flux" href="http://www.groupe-olivier.fr/feed/" />
    <link rel="alternate" type="application/rss+xml" title="Groupe Olivier &raquo; Flux des commentaires" href="http://www.groupe-olivier.fr/comments/feed/" />
    <link rel='stylesheet' id='contact-form-7-css'  href='http://www.groupe-olivier.fr/wp-content/plugins/contact-form-7/includes/css/styles.css?ver=4.0.1' type='text/css' media='all' />
    <link rel='stylesheet' id='jquery-ui-theme-css'  href='http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/themes/redmond/jquery-ui.min.css?ver=1.10.3' type='text/css' media='all' />
    <link rel='stylesheet' id='jquery-ui-timepicker-css'  href='http://www.groupe-olivier.fr/wp-content/plugins/contact-form-7-datepicker/js/jquery-ui-timepicker/jquery-ui-timepicker-addon.min.css?ver=4.0.22' type='text/css' media='all' />
    <link rel='stylesheet' id='unite-bootstrap-css'  href='http://www.groupe-olivier.fr/wp-content/themes/unite/inc/css/bootstrap.min.css?ver=4.0.22' type='text/css' media='all' />
    <link rel='stylesheet' id='unite-icons-css'  href='http://www.groupe-olivier.fr/wp-content/themes/unite/inc/css/font-awesome.min.css?ver=4.0.22' type='text/css' media='all' />
    <link rel='stylesheet' id='unite-style-css'  href='http://www.groupe-olivier.fr/wp-content/themes/unite/style.css?ver=4.0.22' type='text/css' media='all' />
    <link rel='stylesheet' id='frs-css-css'  href='http://www.groupe-olivier.fr/wp-content/plugins/fluid-responsive-slideshow/css/frs.css?ver=2.0.3' type='text/css' media='all' />
    <link rel='stylesheet' id='frs-position-css'  href='http://www.groupe-olivier.fr/wp-content/plugins/fluid-responsive-slideshow/css/frs-position.css?ver=2.0.3' type='text/css' media='all' />
    <link rel='stylesheet' id='Open Sans-css'  href='http://fonts.googleapis.com/css?family=Open+Sans%3A400italic%2C700italic%2C400%2C700&#038;ver=2.0.3' type='text/css' media='all' />
    <!-- This site uses the Yoast Google Analytics plugin v5.2.8 - Universal enabled - https://yoast.com/wordpress/plugins/google-analytics/ -->
    <script type="text/javascript">
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','__gaTracker');

        __gaTracker('create', 'UA-58366683-1', 'auto');
        __gaTracker('set', 'forceSSL', true);
        __gaTracker('send','pageview');
    </script>
    <script type='text/javascript' src='http://www.groupe-olivier.fr/wp-includes/js/jquery/jquery.js?ver=1.11.1'></script>
    <script type='text/javascript' src='http://www.groupe-olivier.fr/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.2.1'></script>
    <script type='text/javascript' src='http://www.groupe-olivier.fr/wp-content/plugins/fluid-responsive-slideshow/js/frs.js?ver=2.0.3'></script>
    <script type='text/javascript' src='http://www.groupe-olivier.fr/wp-content/plugins/fluid-responsive-slideshow/js/jquery.touchSwipe.min.js?ver=4.0.22'></script>
    <script type='text/javascript' src='http://www.groupe-olivier.fr/wp-content/plugins/fluid-responsive-slideshow/js/imagesloaded.min.js?ver=2.0.3'></script>
    <script type='text/javascript' src='http://www.groupe-olivier.fr/wp-content/themes/unite/inc/js/bootstrap.min.js?ver=4.0.22'></script>
    <script type='text/javascript' src='http://www.groupe-olivier.fr/wp-content/themes/unite/inc/js/main.min.js?ver=4.0.22'></script>
    <link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://www.groupe-olivier.fr/xmlrpc.php?rsd" />
    <link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://www.groupe-olivier.fr/wp-includes/wlwmanifest.xml" />
    <meta name="generator" content="WordPress 4.0.22" />
    <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/echarts.min.js"></script>
    <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts-gl/echarts-gl.min.js"></script>
    <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts-stat/ecStat.min.js"></script>
    <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/extension/dataTool.min.js"></script>
    <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/map/js/china.js"></script>
    <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/map/js/world.js"></script>
    <script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=ZUONbpqGBsYGXNIYHicvbAbM"></script>
    <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/extension/bmap.min.js"></script>
    <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/simplex.js"></script>
    <style type="text/css">.entry-content {font-family: Helvetica Neue; font-size:15px; font-weight: normal; color:#6B6B6B;}</style>
</head>

<!-- ------------ -->
<!-- HEADER DEBUT -->
<!-- ------------ -->

<body class="home page page-id-2 page-template page-template-page-homepage-php custom-background">
<div id="page" class="hfeed site">
    <div id="head">
        <div class="container">
            <div class="row">
                <header id="masthead" class="site-header col-sm-12" role="banner">
                    <div class="row">
                        <div class="site-branding col-lg-3 col-md-2 col-sm-12">
                            <h1 class="hidden"><a href="index.php" rel="home">Groupe Olivier</a></h1>
                            <div id="logo" class="row">
                                <a href="index.php"><img src="http://www.groupe-olivier.fr/wp-content/uploads/2015/01/logo-groupe-olivier.jpg"  height="111" width="180" alt="Groupe Olivier"/></a>

                            </div><!-- Fin du logo. -->


                        </div><!-- Fermeture du branding. -->

                        <div class="nav-header col-md-8 col-lg-7 col-lg-offset-3 col-sm-12">
                            <nav class="navbar navbar-default row" role="navigation">
                                <div class="navbar-header">
                                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                                        <span class="sr-only">Toggle navigation</span>
                                        <span class="icon-bar"></span>
                                        <span class="icon-bar"></span>
                                        <span class="icon-bar"></span>
                                    </button>

                                </div>

                                <div class="collapse navbar-collapse navbar-ex-collapse">
                                    <ul id="menu-menu-principale" class="nav navbar-nav">
                                        <li id="menu-item-2" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-41 dropdown">
                                            <a title="etat_serre" href="etat_serre.html"=>Etat de la serre</a>
                                        </li>
                                        <li id="menu-item-3" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-42 dropdown">
                                            <a title="evolution_mesure" href="evolution_mesure.html"=>Visualisation des mesures</a>
                                        </li>
                                    </ul></div>
                            </nav><!-- Fermeture de la navigation du site.  -->
                        </div><!-- Fermeture de nav-header. -->
                    </div>
                </header><!-- Fermeture du header. -->
            </div>
        </div>
    </div>

    <!-- ---------- -->
    <!-- HEADER FIN -->
    <!-- ---------- -->
    <!-- ----------------- -->
    <!-- TESTIMONIAL DEBUT -->
    <!-- ----------------- -->

    <div class="container">
        <br>
        <form method="get">
        <div class="home-widget-area row col-sm-6">
            <div>
                <div class="textwidget" style="text-align: center">
                    <a>
                        <br>
                        <img style="border: 0 none;" src="inc/img/calendrier.png" alt="" width="150" height="150" />
                        <br>
                        <br>
                        <span><p>Début : <input type="date" name="date_1" required maxlength="10"></p></span>
                        <br>
                    </a>
                </div>
            </div>
        </div>
        <div class="home-widget-area row col-sm-6">
            <div>
                <div class="textwidget" style="text-align: center">
                    <a>
                        <br>
                        <img style="border: 0 none;" src="inc/img/calendrier.png" alt="" width="150" height="150" />
                        <br>
                        <br>
                        <span><p>Fin : <input type="date" name="date_2" required maxlength="10"></p></span>
                        <br>
                    </a>
                </div>
            </div>
        </div>
        <div class="textwidget" style="text-align: center">
            <button type="submit" value="submit" class="btn btn-primary">Valider</button>
            <hr>
        </div>
        </form>
        <?php
        $date_debut = $_GET['date_1'];
        $date_fin = $_GET['date_2'];
        if ($date_fin < $date_debut) {
            echo ' <center>Veuillez resaisir les dates !</center> <br>';
        }
        ;?>

        <!-- -----------------------------------------------------------------------------------------------------------
        ---------------------------------------ECHO-LE-JS-POUR-FONCTIONNER----------------------------------------------
        ------------------------------------------------------------------------------------------------------------ -->
        


        <?php

        // -----------------------------------------------------------------------------------

        $materiels=$bdd->query("SELECT * FROM materiel");
        while( $materiel = $materiels->fetch() )
        {
        $tab[] =  $materiel['nom']; // On récupère les données sous forme de tableau, pour récupérer les valeurs 1à1.
        }
        $taille_tab = count($tab); // On compte le nombre de valeurs dans le tableau.
        $nom = "nom";
        for ($i = 0; $i <= $taille_tab-1; $i++){
            // à completer pour que ça puisse le faire en fonction du nombre de
            //valeur dans la BDD.
        }
        $nom1 = $tab[0]; // On récupère le nom du capteur 1.
        $nom2 = $tab[1]; // On récupère le nom du capteur 2.
        $nom3 = $tab[2]; // On récupère le nom du capteur 3.
        // -----------------------------------------------------------------------------------

        // On récupère les données du capteur numéro 1.
        $releves=$bdd->query("SELECT * FROM releve WHERE id_materiel = 1");
        while( $releve = $releves->fetch() )
        {
            $tableau[] = $releve['valeur'];
        }
        $taille_tableau = count($tableau);
        for ($u = 0; $u <= $taille_tab-1; $u++){
        }

        // On récupère les données du capteur numéro 2.
        $releves2=$bdd->query("SELECT * FROM releve WHERE id_materiel = 2");
        while( $releve2 = $releves2->fetch() )
        {
            $tableau2[] = $releve2['valeur'];
        }
        $taille_tableau2 = count($tableau2);
        for ($u = 0; $u <= $taille_tableau2-1; $u++){
        }


        // -----------------------------------------------------------------------------------

        $affichage_date_1 = $_GET['date_1'];
        $affichage_date_2 = $_GET['date_2'];
        echo "<h3>Du $affichage_date_1 au $affichage_date_2 :</h3>";
        echo "<div id=\"graph\" style=\"height: 500%\" class=\"home\">
        </div>
            <script type=\"text/javascript\">
                var dom = document.getElementById(\"graph\");
                var myChart = echarts.init(dom);
                var app = {};
                option = null;
                option = {
                    tooltip: {
                        trigger: 'axis'
                    },
                    grid: {
                        left: '3%',
                        right: '4%',
                        bottom: '3%',
                        containLabel: true
                    },
                    yAxis: {
                        type: 'value'
                    },
                    xAxis: {
                        type: 'category',
                        boundaryGap: false,
                        data: ['$date_debut','$date_fin']
                    },
                    legend: {
                        data:[('$nom1'),('$nom2')]
                    },
                    series: [
                        {
                            name:('$nom1'),
                            type:'line',
                            data:['$tableau[0]','$tableau[1]']
                        },
                        {
                            name:('$nom2'),
                            type:'line',
                            data:['$tableau2[0]','$tableau2[1]']
                        }
                    ]
                };
                ;
                if (option && typeof option === \"object\") {
                    myChart.setOption(option, true);
                }
            </script>
    </div>}";
        ?>

    <!-- --------------- -->
    <!-- TESTIMONIAL FIN -->
    <!-- --------------- -->

    <footer id="colophon" class="site-footer" role="contentinfo">
        <div class="site-info container">
            <div class="row">
                <div class="adresse col-md-10">
                    <div id="text-8" class="widget widget_text">
                        <div class="textwidget"><p>Groupe Olivier, la Bonodière, 44115 Haute-Goulaine </p>
                        </div>
                    </div>
                </div>
                <nav role="navigation" class="col-md-2">
                    <ul id="menu-pied-de-page" class="nav footer-nav clearfix">
                        <li id="menu-item-145" class="menu-item menu-item-type-post_type menu-item-object-page current-menu-item page_item page-item-2 current_page_item menu-item-145">
                            <a href="index.html">Accueil</a>
                        </li>
                    </ul>
                </nav>
            </div>
        </div><!-- .site-info -->
    </footer><!-- #colophon -->
    <div id="bottom-footer">
        <div class="site-info container">
            <div class="row">
                <div class="copyright col-md-12">
                    © copyright
                </div>
            </div>
        </div>
    </div>
</div><!-- #page -->

<link rel='stylesheet' id='frs-skin-default-css'  href='http://www.groupe-olivier.fr/wp-content/plugins/fluid-responsive-slideshow/skins/frs-skin-default.css?ver=2.0.3' type='text/css' media='all' />
<script type='text/javascript' src='http://www.groupe-olivier.fr/wp-content/plugins/contact-form-7/includes/js/jquery.form.min.js?ver=3.51.0-2014.06.20'></script>
<script type='text/javascript'>
    /* <![CDATA[ */
    var _wpcf7 = {"loaderUrl":"http:\/\/www.groupe-olivier.fr\/wp-content\/plugins\/contact-form-7\/images\/ajax-loader.gif","sending":"Envoi en cours ..."};
    /* ]]> */
</script>
<script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/i18n/jquery.ui.datepicker-fr.min.js?ver=1.10.3'></script>
<script type='text/javascript' src='http://www.groupe-olivier.fr/wp-content/plugins/contact-form-7-datepicker/js/jquery-ui-timepicker/jquery-ui-timepicker-addon.min.js?ver=4.0.22'></script>
<script type='text/javascript' src='http://www.groupe-olivier.fr/wp-content/plugins/contact-form-7-datepicker/js/jquery-ui-timepicker/i18n/jquery-ui-timepicker-fr.js?ver=4.0.22'></script>
<script type='text/javascript' src='http://www.groupe-olivier.fr/wp-includes/js/jquery/ui/jquery.ui.widget.min.js?ver=1.10.4'></script>
<script type='text/javascript' src='http://www.groupe-olivier.fr/wp-includes/js/jquery/ui/jquery.ui.mouse.min.js?ver=1.10.4'></script>
<script type='text/javascript' src='http://www.groupe-olivier.fr/wp-includes/js/jquery/ui/jquery.ui.button.min.js?ver=1.10.4'></script>
<script type='text/javascript' src='http://www.groupe-olivier.fr/wp-content/plugins/contact-form-7-datepicker/js/jquery-ui-sliderAccess.js?ver=4.0.22'></script>
</body>
</html>